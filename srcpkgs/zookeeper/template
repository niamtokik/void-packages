# Template file for 'zookeeper'

pkgname="zookeeper"
version="3.5.2"
revision=1
build_style=gnu-configure
short_desc="open-source server which enables highly reliable distributed coordination"
maintainer="Mathieu Kerjouan <void@steepath.eu>"
license="MPL-2.0"
homepage="https://github.com/apache/zookeeper"
distfiles="https://github.com/apache/${pkgname}/archive/release-${version}.tar.gz"
checksum="c3bd54382adaad9c0bf5d366949eb1d21762d5fd1ac643399adcb0f5349ced65"
hostmakedepends="openjdk openjdk-jre apache-ant"
wrksrc=${pkgname}-release-${version}

do_configure() {
	:
}

do_build() {
	ant
}

do_install() {
	# libraries
	vmkdir usr/share/java/
	vcopy build/zookeeper-${version}-alpha.jar usr/share/java

	# executable
	vinstall src/contrib/zooinspector/zooInspector.sh 555 usr/bin

	# configuration
	vmkdir etc/zookeeper
	vcopy conf/* etc/zookeeper
	vmkdir etc/zookeeper/zooinspector
	vcopy src/contrib/zooinspector/config/* etc/zookeeper/zooinspector

	# license
	vlicense LICENSE.txt

	# extra
	vmkdir usr/share/zookeeper/bin
	vcopy bin/*.sh usr/share/zookeeper/bin
	vcopy bin/*.txt usr/share/zookeeper/bin

	vmkdir usr/share/doc/zookeeper
	vcopy docs/* usr/share/doc/zookeeper
}
