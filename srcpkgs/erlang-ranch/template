# Template file for 'erlang-ranch'

pkgname="erlang-ranch"
version="1.3.1"
revision=1
build_style=erlang-mk
short_desc="Socket acceptor pool for TCP protocols."
maintainer="Mathieu Kerjouan <void@steepath.eu>"
license="BSD"
homepage="https://github.com/ninenines/ranch"
distfiles="https://github.com/ninenines/${pkgname#erlang-}/archive/${version}.tar.gz"
checksum="0be7035a7ea245a2010ebe4a9a23a3fe79c63c6928b1dfd4640bef92c74bd99e"
hostmakedepends="erlang make"
depends="erlang>=16"
wrksrc=${pkgname#erlang-}-${version}

do_build() {
	# this release (1.3.1) seems buggy.
	# need to clean first and manually build app
	make clean
	make ranch.d
	make ebin/ranch.app
	make app
}
